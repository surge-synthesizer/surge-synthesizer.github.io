<img id="surge-logo" src="/images/surge_xt_logo_white.svg" alt="Surge XT logo" />

<script>
    const logo = document.getElementById("surge-logo") as HTMLImageElement;
    const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");

    function setLogo() {
        switch (localStorage.getItem("theme")) {
            case "auto":
                window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? (logo.src = "/images/surge_xt_logo_white.svg")
                    : (logo.src = "/images/surge_xt_logo_black.svg");
                break;

            case "dark":
                logo.src = "/images/surge_xt_logo_white.svg";
                break;

            case "light":
                logo.src = "/images/surge_xt_logo_black.svg";
                break;
        }
    }

    const observer = new MutationObserver(() => {
        switch (localStorage.getItem("theme")) {
            case "auto":
                window.matchMedia("(prefers-color-scheme: dark)").matches
                    ? (logo.src = "/images/surge_xt_logo_white.svg")
                    : (logo.src = "/images/surge_xt_logo_black.svg");
                break;

            case "dark":
                logo.src = "/images/surge_xt_logo_white.svg";
                break;

            case "light":
                logo.src = "/images/surge_xt_logo_black.svg";
                break;
        }
    });

    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ["data-theme"],
    });

    mediaQuery.addEventListener("change", () => {
        localStorage.getItem("theme") === "auto" &&
            (logo.src = mediaQuery.matches
                ? "/images/surge_xt_logo_white.svg"
                : "/images/surge_xt_logo_black.svg");
    });

    setLogo();
</script>
