---
import Panel from "../panel.astro";
import PanelItem from "../panel_item.astro";
import PanelText from "../panel_text.astro";
import PanelMedia from "../panel_media.astro";
---

<Panel style="bg-gradient-to-b from-[#1D222A] to-[#004f8a] text-neutral-200 [&_a]:text-white">
    <PanelItem>
        <PanelText>
            <div class="my-4 text-3xl font-bold">One Synth Challenge,</div>

            <div class="my-4 text-3xl font-bold">❤️❤️❤️</div>

            <div class="my-4 text-3xl font-bold">Thank YOU!</div>

            <p>
                We think it's pretty cool that you picked Surge XT for the One Synth Challenge. And
                then did it again a few more times!
            </p>

            <p>
                Surge XT was in the spotlight of OSC #122, #138, #159, and most recently, #181. A
                talented group of musicians created all these tracks using Surge XT as the only
                sound generating device. Or - in some exceptional cases - only Surge XT Effects
                plugin was used, much to our awe and amazement!
            </p>

            <p>
                Do give these tracks a listen, as we think they are a brilliant showcase of
                flexibility and amazing range of sounds that Surge XT offers.
            </p>
        </PanelText>
    </PanelItem>

    <PanelItem>
        <PanelMedia>
            <div class="flex flex-col items-center gap-2">
                <select
                    aria-label="OSC"
                    name="osc"
                    id="osc-embed-select"
                    class="rounded-sm bg-neutral-200 p-1 text-neutral-800">
                    <option value="181" selected>One Synth Challenge #181</option>
                    <option value="159">One Synth Challenge #159</option>
                    <option value="138">One Synth Challenge #138</option>
                    <option value="122">One Synth Challenge #122</option>
                </select>
                <iframe
                    id="osc-embed-iframe"
                    width="100%"
                    height="600"
                    src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1803556615"
                    class="m-0 p-0">
                </iframe>
                <a class="text-xs" href="https://soundcloud.com/pages/cookies">
                    Soundcloud cookie policy
                </a>
            </div>
        </PanelMedia>
    </PanelItem>
</Panel>

<script>
    const osc_embed_select = document.getElementById("osc-embed-select") as HTMLSelectElement;
    const osc_embed_iframe = document.getElementById("osc-embed-iframe") as HTMLIFrameElement;
    const osc_embed_urls = new Map<string, string>([
        [
            "181",
            "https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1803556615",
        ],
        [
            "159",
            "https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1447158379",
        ],
        [
            "138",
            "https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/1121073988",
        ],
        [
            "122",
            "https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/769840530",
        ],
    ]);

    osc_embed_select.addEventListener("change", (e) => {
        const target = e.target as HTMLSelectElement;

        const url = osc_embed_urls.get(target.value);

        if (url) {
            osc_embed_iframe.src = url;
        }
    });
</script>
